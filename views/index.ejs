<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shadow City Generator Frontend</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="container">
    <h1 class="mt-5">Shadow City Generator</h1>
    <p class="lead">Upload a GeoJSON file and set your options to generate a 3D-printable city model.</p>
    <form action="/upload" method="post" enctype="multipart/form-data">
      
      <!-- File Upload -->
      <div class="form-group">
        <label for="geojson">GeoJSON File</label>
        <input type="file" class="form-control-file" id="geojson" name="geojson" required>
      </div>

      <!-- Basic Options -->
      <fieldset class="border p-3 mb-3">
        <legend class="w-auto">Basic Options</legend>
        <div class="form-group">
          <label for="size">Model Size (mm)</label>
          <input type="number" class="form-control" id="size" name="size" value="200" required>
        </div>
        <div class="form-group">
          <label for="height">Maximum Height (mm)</label>
          <input type="number" class="form-control" id="height" name="height" value="20" required>
        </div>
        <div class="form-group">
          <label for="style">Artistic Style</label>
          <select class="form-control" id="style" name="style">
            <option value="modern" selected>Modern</option>
            <option value="classic">Classic</option>
            <option value="minimal">Minimal</option>
          </select>
        </div>
        <div class="form-group">
          <label for="detail">Detail Level (0-2)</label>
          <input type="number" step="0.1" class="form-control" id="detail" name="detail" value="1.0" required>
        </div>
        <div class="form-group">
          <label for="merge-distance">Merge Distance</label>
          <input type="number" step="0.1" class="form-control" id="merge-distance" name="merge-distance" value="2.0">
        </div>
        <div class="form-group">
          <label for="cluster-size">Cluster Size</label>
          <input type="number" step="0.1" class="form-control" id="cluster-size" name="cluster-size" value="3.0">
        </div>
        <div class="form-group">
          <label for="height-variance">Height Variance</label>
          <input type="number" step="0.1" class="form-control" id="height-variance" name="height-variance" value="0.2">
        </div>
        <div class="form-group">
          <label for="road-width">Road Width (mm)</label>
          <input type="number" step="0.1" class="form-control" id="road-width" name="road-width" value="2.0">
        </div>
        <div class="form-group">
          <label for="water-depth">Water Depth (mm)</label>
          <input type="number" step="0.1" class="form-control" id="water-depth" name="water-depth" value="1.4">
        </div>
        <div class="form-group">
          <label for="min-building-area">Minimum Building Area (mÂ²)</label>
          <input type="number" step="0.1" class="form-control" id="min-building-area" name="min-building-area" value="600.0">
        </div>
        <div class="form-group form-check">
          <input type="checkbox" class="form-check-input" id="debug" name="debug">
          <label class="form-check-label" for="debug">Enable Debug Output</label>
        </div>
      </fieldset>

      <!-- Preprocessing Options -->
      <fieldset class="border p-3 mb-3">
        <legend class="w-auto">Preprocessing Options</legend>
        <div class="form-group form-check">
          <input type="checkbox" class="form-check-input" id="preprocess" name="preprocess">
          <label class="form-check-label" for="preprocess">Enable Preprocessing</label>
        </div>
        <div class="form-group">
          <label for="crop-distance">Crop Distance (meters)</label>
          <input type="number" step="0.1" class="form-control" id="crop-distance" name="crop-distance">
        </div>
        <div class="form-group">
          <label>Crop Bounding Box (SOUTH, WEST, NORTH, EAST)</label>
          <div class="form-row">
            <div class="col">
              <input type="number" step="0.0001" class="form-control" placeholder="South" name="crop_bbox1">
            </div>
            <div class="col">
              <input type="number" step="0.0001" class="form-control" placeholder="West" name="crop_bbox2">
            </div>
            <div class="col">
              <input type="number" step="0.0001" class="form-control" placeholder="North" name="crop_bbox3">
            </div>
            <div class="col">
              <input type="number" step="0.0001" class="form-control" placeholder="East" name="crop_bbox4">
            </div>
          </div>
        </div>
      </fieldset>

      <!-- Export Options -->
      <fieldset class="border p-3 mb-3">
        <legend class="w-auto">Export Options</legend>
        <div class="form-group">
          <label for="export">Export Format</label>
          <select class="form-control" id="export" name="export">
            <option value="preview">Preview</option>
            <option value="stl">STL</option>
            <option value="both" selected>Both</option>
          </select>
        </div>
        <div class="form-group">
          <label for="output-stl">Output STL Filename</label>
          <input type="text" class="form-control" id="output-stl" name="output-stl" placeholder="Optional">
        </div>
        <div class="form-group form-check">
          <input type="checkbox" class="form-check-input" id="no-repair" name="no-repair">
          <label class="form-check-label" for="no-repair">Disable Automatic Geometry Repair</label>
        </div>
        <div class="form-group form-check">
          <input type="checkbox" class="form-check-input" id="force" name="force">
          <label class="form-check-label" for="force">Force STL Generation on Validation Failure</label>
        </div>
      </fieldset>

      <!-- Preview and Integration Options -->
      <fieldset class="border p-3 mb-3">
        <legend class="w-auto">Preview &amp; Integration Options</legend>
        <div class="form-group">
          <label>Preview Image Size (Width, Height in pixels)</label>
          <div class="form-row">
            <div class="col">
              <input type="number" class="form-control" placeholder="Width" name="preview-size-width" value="1920">
            </div>
            <div class="col">
              <input type="number" class="form-control" placeholder="Height" name="preview-size-height" value="1080">
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="preview-file">Preview Image Filename</label>
          <input type="text" class="form-control" id="preview-file" name="preview-file" placeholder="Optional">
        </div>
        <div class="form-group form-check">
          <input type="checkbox" class="form-check-input" id="watch" name="watch">
          <label class="form-check-label" for="watch">Watch SCAD File and Auto-Reload</label>
        </div>
        <div class="form-group">
          <label for="openscad-path">OpenSCAD Executable Path</label>
          <input type="text" class="form-control" id="openscad-path" name="openscad-path" placeholder="Optional">
        </div>
      </fieldset>

      <button type="submit" class="btn btn-primary">Generate Model</button>
    </form>
  </div>
</body>
</html>
